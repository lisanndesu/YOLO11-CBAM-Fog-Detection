æ‰§è¡Œæ–‡ä»¶ï¼šutils/coco2yolo.py

æ‰§è¡Œæ–‡ä»¶ï¼šï¼ˆutils/split_dataset.pyï¼‰
        ä¸Šè¿°æ–‡ä»¶ä½œç”¨å¦‚ä¸‹ï¼š æŠŠåŸå›¾å¤åˆ¶åˆ° processed/images
                          8:1:1 åˆ’åˆ† train/val/test
                        è‡ªåŠ¨ç”Ÿæˆ cottonweed.yaml

å‘½ä»¤è¡Œæ‰§è¡Œï¼šyolo train data=data/cottonweed.yaml model=yolo11n.yaml epochs=50 name=clear
            æœ€åmap50ï¼š0.84292     map50-95ï¼š0.76415
---------------------------ä¸­åº¦é›¾å›¾fog_med  beta=0.8-----------------------------------------------2026/1/15
æ‰§è¡Œ utils/synthetic_haze_mid.py
å‘½ä»¤è¡Œæ‰§è¡Œ:  copy /s /y C:\code_py\yolo11_fog\data\processed\labels\val C:\code_py\yolo11_fog\data\fog_val_med\

å‘½ä»¤è¡Œæ‰§è¡Œï¼š  yolo val data=data/fog_med.yaml model=runs/detect/clear/weights/best.pt
            æœ€åmAP50ï¼š0.835      mAP50-95ï¼š 0.761
ç»“æœï¼šåŠ é›¾æ•ˆæœå¤ªå·®ï¼Œå’Œæ²¡åŠ å·®ä¸å¤š
--------------------------------åˆæˆhardé›¾  beta=1.2-------------------------------------------2026/1/15

æ‰§è¡Œ utils/synthetic_haze_hard.py
å‘½ä»¤è¡Œæ‰§è¡Œï¼šxcopy /s /y C:\code_py\yolo11_fog\data\processed\labels\val C:\code_py\yolo11_fog\data\fog_val_hard\

å‘½ä»¤è¡Œæ‰§è¡Œï¼š yolo val data=data/fog_val_hard.yaml model=runs/detect/clear/weights/best.pt
            æœ€åmAP50ï¼š0.831ï¼Œ   mAP50-95: 0.759
ç»“æœï¼šåŠ é›¾æ•ˆæœè¿˜æ˜¯å¾ˆå·®ï¼Œå’Œæ²¡åŠ å·®ä¸å¤š
--------------------------------åˆæˆsereveé›¾---------------------------------------------2026/1/15
æ‰§è¡Œ utiles/synthetic_sereve.py
å‘½ä»¤è¡Œæ‰§è¡Œï¼š  xcopy /s /y C:\code_py\yolo11_fog\data\processed\labels\val C:\code_py\yolo11_fog\data\fog_severe

å‘½ä»¤è¡Œæ‰§è¡Œï¼š


_____________________________nodeepHaze beta = 0.5 A = 230--------------------------------2026/1/18
æ‰§è¡Œï¼šutiles/synthetic_haze_nodeep_0.5_230
ä¸ç”¨å‘½ä»¤è¡Œæ‹·è´labels
å‘½ä»¤è¡Œæ‰§è¡Œï¼šyolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs/detect/clear/weights/best.pt
            æœ€åmAP50ï¼š0.825     mAP50-95ï¼š0.754

_____________________________nodeepHaze beta = 1.2 A = 230--------------------------------2026/1/18



            æœ€åmAP50:0.793       mAP50-95:0.726


_____________________________nodeepHaze beta = 1.7 A = 230--------------------------------2026/1/18



            æœ€åmAP50:0.771       mAP50-95:0.705

---------------------------------- yolo11.yamlä¸­æ’å…¥CBAM --------------------------------------2026/1/20
ï¼ˆæœ¬é¡¹ç›®ä½¿ç”¨è‡ªå®šä¹‰çš„my_cbam.py,éyolo11å†…ç½®çš„conv.pyä¸‹çš„CBAM)

ä» https://github.com/ultralytics/ultralytics/blob/main/ultralytics/cfg/models/11/yolo11.yaml ä¸‹è½½yolo11.yaml
åœ¨yolo11.yamlä¸­æ–°å¢  - [-1, 1, CBAM, []] ï¼ˆP3ï¼‰ , ncæ”¹ä¸º12     å¦ä¿å­˜ä¸ºyolo_cbam.yaml

-------------------------------------é…ç½®my_cbamå¹¶æ·»åŠ åˆ°yolo11åŒ…ä¸­-----------------------2026/1/20
    \\  è¿è¡Œcbam.py   ï¼ˆä½¿å¾—yolo11_cbam.yamlä¸­å¯ç”¨è¯†åˆ«cbamï¼‰ï¼ˆå…¶å®ä¸è¿è¡Œä¹Ÿè¡Œï¼Œå› ä¸ºtrain.pyä¸­çš„import cbamä¼šè‡ªåŠ¨å¯¼å…¥
    \\  è¿è¡Œ train_cbam.py
    \\  å¿½ç•¥ä»¥ä¸Šå·²ç»æ‰§è¡Œçš„ä¸¤æ­¥ï¼Œåº”æ‰‹åŠ¨ä¿®æ”¹ultralytics/nn/models/ç­‰æ–‡ä»¶å¤¹ï¼Œå…·ä½“äº‰å–åšæ³•å¦‚ä¸‹ï¼šï¼ˆè¯¦ç»†æ­¥éª¤ï¼šhttps://www.doubao.com/thread/w26a96e93ade43011ï¼‰
åœ¨C:\MyFiles\Anaconda3-202402-1\envs\yolo11-fog\Lib\site-packages\ultralytics\nn\modulesä¸‹æ–°å»ºmy_cbam.py
ä¿®æ”¹ C:\MyFiles\Anaconda3-202402-1\envs\yolo11-fog\Lib\site-packages\ultralytics\nn\modules\__init__.py:
    æ–°å¢ï¼šfrom .my_cbam import CBAM, ChannelAttention, SpatialAttention    # æ¢ä¸ºè‡ªå®šä¹‰çš„å®Œæ•´cbam
    åˆ é™¤ï¼šfrom .conv import (
        # CBAM,                                              # å–æ¶ˆyolo11å†…ç½®çš„cbam
        # SpatialAttention,
        # ChannelAttention,
åœ¨C:\MyFiles\Anaconda3-202402-1\envs\yolo11-fog\Lib\site-packages\ultralytics\nn\tasks.py çš„ attempt_load_one_weightå‡½æ•°ä¸­æ–°å¢å¦‚ä¸‹ä»£ç ï¼š
         import sys
         sys.modules['__main__'].CBAM = CBAM
         sys.modules['__main__'].ChannelAttention = ChannelAttention
         sys.modules['__main__'].SpatialAttention = SpatialAttention

--------------------------------è®­ç»ƒæ¨¡å‹yolo11-CBAM---------------------------------------2026/1/20
è¿è¡Œtrain_cbam.py
æœ€åç»“æœï¼š           mAP50ï¼š0.849     mAP50-95ï¼š0.769   ï¼ˆtrainå’Œvaléƒ½æ˜¯æ¸…æ™°å›¾)
ï¼ˆä½†æ˜¯åç»­ï¼ˆç›´åˆ°yolo11_cbam_lightè®­ç»ƒ/æµ‹è¯•å®Œæˆåï¼‰æ‰å‘ç°æ­¤è¿‡ç¨‹å¯èƒ½æœ‰äº›é”™è¯¯ï¼šyolo11_cbam.yamlä¸­æ’å…¥cbamåï¼Œæœªæ›´æ”¹æœ€åä¸€è¡Œï¼ˆdetectï¼‰çš„fromå‚æ•°ï¼ˆ[16, 19, 22]ï¼‰

________________________________æµ‹è¯•yolo11-CBAM   beta = 1.7 A = 230 ------------------------------2026/1/20
å‘½ä»¤è¡Œæ‰§è¡Œï¼š yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\clear_cbam\weights\best.pt
æœ€åç»“æœï¼š           mAP50ï¼š0.812     mAP50-95ï¼š0.74
ï¼ˆå¯¹æ¯”æ— CBAMï¼‰              0.771              0.705

---------------------------------æµ‹è¯•yolo11-CBAM   beta = 1.2   A = 230---------------------------2026/1/20
å‘½ä»¤è¡Œæ‰§è¡Œï¼šyolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\clear_cbam\weights\best.pt
æœ€åç»“æœï¼š           mAP50ï¼š0.82     mAP50-95ï¼š0.747
ï¼ˆå¯¹æ¯”æ— CBAMï¼‰              0.793              0.726

---------------------------------æµ‹è¯•yolo11-CBAM   beta = 0.5   A = 230---------------------------2026/1/20
å‘½ä»¤è¡Œæ‰§è¡Œï¼šyolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\clear_cbam\weights\best.pt
æœ€åç»“æœï¼š           mAP50ï¼š0.829     mAP50-95ï¼š0.754
ï¼ˆå¯¹æ¯”æ— CBAMï¼‰        mAP50ï¼š0.825     mAP50-95ï¼š0.754

---------------------------------è®­ç»ƒæ¨¡å‹yolo11-CBAM-light---------------------------2026/1/21
è½»é‡ç‰ˆï¼šchannelAttentionå•æ± åŒ– + 1Ã—1 å·ç§¯   spatialAttention:3Ã—3 æ·±åº¦å¯åˆ†ç¦»
ä¿®æ”¹ nn\modules\my_cbam.py  , å°†CBAM/SA/CAä¸Šè¿°è½»é‡ç‰ˆæœ¬
è¿è¡Œï¼šyololl-fog/train_cbam_light.py
æœ€åç»“æœï¼š           mAP50ï¼š0.853     mAP50-95ï¼š0.771
ï¼ˆå¯¹æ¯”å®Œæ•´ç‰ˆCBAMï¼‰          0.849              0.769
ï¼ˆå¯¹æ¯”æ— CBAMï¼‰        mAP50ï¼š0.825     mAP50-95ï¼š0.754

ï¼ˆåŒä¸Šï¼Œå‘ç°æ­¤è¿‡ç¨‹å¯èƒ½æœ‰äº›é”™è¯¯ï¼šyolo11_cbam.yamlä¸­æ’å…¥cbamåï¼Œæœªæ›´æ”¹æœ€åä¸€è¡Œï¼ˆdetectï¼‰çš„fromå‚æ•°ï¼ˆ[16, 19, 22]ï¼‰ï¼‰

++++++++++++++++++++++++++++++++++1/22å®‰æ’â€”+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
æµ‹è¯•æ˜¨å¤©è®­ç»ƒçš„è½»é‡ç‰ˆcbamåœ¨å„ç§ç‰©åŒ–æ¡ä»¶ä¸‹çš„å‡†ç¡®ç‡
å­¦ä¹ yamlæ–‡ä»¶é…ç½®
å…ˆå›ºå®šcbamå†…éƒ¨ç»“æ„ä¸ºç»å…¸åŸå§‹ç»“æœï¼ˆratio = 16ï¼Œ kernal_size = 7)
æµ‹è¯•ä¸åŒcbamæ’å…¥æ•°é‡ï¼ˆ1-3ï¼‰ï¼Œä¸ä½ç½®ï¼ˆneckå†…ï¼‰ï¼Œ æ‰¾åˆ°æœ€ä¼˜yolo11-cbamç»“æ„
è°ƒæ•´cbamå†…éƒ¨ç»“æ„/å‚æ•°ï¼Œæ‰¾åˆ°æœ€ä¼˜cbamå†…éƒ¨ç»“æ„


---------------------------------æµ‹è¯•yolo11-CBAM-light 1.7 230---------------------------2026/1/22
å‘½ä»¤è¡Œæ‰§è¡Œï¼šyolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\clear_cbam_light\weights\best.pt
æœ€åç»“æœï¼š           mAP50ï¼š0.791     mAP50-95ï¼š0.722
ï¼ˆå¯¹æ¯”å®Œæ•´CBAMï¼‰          mAP50ï¼š0.82     mAP50-95ï¼š0.747
ï¼ˆå¯¹æ¯”æ— CBAMï¼‰              0.771              0.705

---------------------------------æµ‹è¯•yolo11-CBAM-light 1.2 230---------------------------2026/1/22
å‘½ä»¤è¡Œæ‰§è¡Œï¼šyolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\clear_cbam_light\weights\best.pt
æœ€åç»“æœï¼š                 mAP50ï¼š 0.802         mAP50-95ï¼š 0.732
ï¼ˆå¯¹æ¯”å®Œæ•´CBAMï¼‰            mAP50ï¼š0.82          mAP50-95ï¼š0.747
ï¼ˆå¯¹æ¯”æ— CBAMï¼‰                    0.793              0.726

---------------------------------æµ‹è¯•yolo11-CBAM-light 0.5 230---------------------------2026/1/22
å‘½ä»¤è¡Œæ‰§è¡Œï¼šyolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\clear_cbam_light\weights\best.pt
æœ€åç»“æœï¼š                 mAP50ï¼š 0.831          mAP50-95ï¼š 0.755
ï¼ˆå®Œæ•´CBAMï¼š                   mAP50ï¼š0.829     mAP50-95ï¼š0.754
ï¼ˆå¯¹æ¯”æ— CBAMï¼‰                mAP50ï¼š0.825     mAP50-95ï¼š0.754


------------------------------------é…ç½®æ­£ç¡®çš„yaml  yolo11_3cbam-------------------------------2026/1/22
å›ºå®šcbamå†…éƒ¨ç»“æ„ä¸ºå®Œæ•´CBAMï¼š
    ä¿®æ”¹models/my_cbam.py, æ¢ä¸ºå®Œæ•´CBAM
æ–°å»ºæ­£ç¡®çš„yamlæ–‡ä»¶ï¼š yolo11_3cbam
    æ’å…¥ä¸‰å±‚cbam
    ä¿®å¤æœ€åä¸€è¡Œdetectçš„fromå‚æ•°bugï¼Œç¡®ä¿fromå‚æ•°ä¸åŠ å…¥cbamåçœŸå®å±‚æ•°åŒ¹é…

-------------------------------------è®­ç»ƒyolo11_3cbam-----------------------------2026/1/22
å‘½ä»¤è¡Œè¿è¡Œï¼šyolo train data=data/cottonweed.yaml model=models/yolo11n_3cbam.yaml epochs=50 name=clear_3cbam device=0
ç»“æœï¼š             map50       mAP50-95
this                 0.86       0.787
baseline             0.84292    0.76415

---------------------------------æµ‹è¯•yolo11-3CBAM- 1.7 230---------------------------2026/1/22
yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\clear_3cbam\weights\best.pt
ç»“æœï¼š             map50       mAP50-95
this                 0.806        0.741
å®Œæ•´CBAM              0.82        0.747
baseline             0.771              0.705

---------------------------------æµ‹è¯•yolo11-3CBAM- 1.2 230---------------------------2026/1/22
yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\clear_3cbam\weights\best.pt
ç»“æœï¼š             map50       mAP50-95
this             0.822      0.756
å®Œæ•´CBAM          0.82       0.747
baseline         0.793       0.726


---------------------------------æµ‹è¯•yolo11-3CBAM- 0.5 230---------------------------2026/1/22
yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\clear_3cbam\weights\best.pt
ç»“æœï¼š             map50       mAP50-95
this              0.843      0.776
å®Œæ•´CBAM           0.829      0.754
baseline           0.825     0.754


++++++++++++++++++++++++++++++++++1/23å®‰æ’â€”+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
å°†epochæ”¹ä¸º100ï¼Œé‡æ–°è¿›è¡Œbaseline  CBAM  2CBAM  3CBAM çš„å®éªŒ
ç¡®å®šepoch100çš„baselineå’Œæœ€ä¼˜CBAMæ’å…¥ä½ç½®/æ•°é‡åï¼Œè°ƒæ•´cbamå†…éƒ¨ç»“æ„/å‚æ•°ï¼Œæ‰¾åˆ°æœ€ä¼˜cbamå†…éƒ¨ç»“


---------------------------------è®­ç»ƒbaseline_100epochs---------------------------2026/1/23
yolo train data=data/cottonweed.yaml model=yolo11n.yaml epochs=100 name=baseline_100epochs



--------------------------------è®­ç»ƒæ¨¡å‹yolo11-CBAM-100epochs---------------------------------------2026/1/23
yolo train data=data/cottonweed.yaml model=yolo11_cbam.yaml epochs=100 name=cbam_100epochs
æœ€åç»“æœï¼š


--------------------------------è®­ç»ƒæ¨¡å‹yolo11-2CBAM-100epochs---------------------------------------2026/1/23
yolo train data=data/cottonweed.yaml model=yolo11_2cbam.yaml epochs=100 name=2cbam_100epochs
æœ€åç»“æœï¼š

--------------------------------è®­ç»ƒæ¨¡å‹yolo11-3CBAM-100epochs---------------------------------------2026/1/23
yolo train data=data/cottonweed.yaml model=yolo11_3cbam.yaml epochs=100 name=3cbam_100epochs

å‘½ä»¤è¡Œè¾“å‡ºï¼šYOLO11n summary: 319 layers, 2,592,180 parameters, 2,592,164 gradients, 6.5 GFLOPs
        Speed: 0.3ms preprocess, 2.7ms inference, 0.0ms loss, 3.9ms postprocess per image

æœ€åç»“æœï¼š           0.904          0.835


---------------------------------æµ‹è¯•baseline_100epochs- 0.5 230---------------------------2026/1/23
yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\baseline_100epochs\weights\best.pt
ç»“æœï¼š             map50       mAP50-95
this               0.9        0.832

---------------------------------æµ‹è¯•baseline_100epochs- 1.2 230--------------------------2026/1/23
yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\baseline_100epochs\weights\best.pt
ç»“æœï¼š             map50       mAP50-95
this                0.889      0.822

---------------------------------æµ‹è¯•baseline_100epochs- 1.7 230--------------------------2026/1/23
yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\baseline_100epochs\weights\best.pt
ç»“æœï¼š             map50       mAP50-95
this               0.875      0.806

===================================å‘ç°baseline_100epochs åœ¨é›¾å›¾ä¸­ä¸‹é™æ€§èƒ½å¤ªå°ï¼Œåªæœ‰2ppå·¦å³ï¼Œæ‰€ä»¥å†³å®šä¸å†è€ƒè™‘100epochsçš„æ¨¡å‹-------------------------

------------------------------è®­ç»ƒyolo11_2cbam-----------------------------------------------2026/1/23
yolo train data=data/cottonweed.yaml model=models/yolo11n_2cbam.yaml epochs=50 name=clear_2cbam device=0 > log_2cbam.txt 2>&1
 ç»“æœï¼š     0.859      0.782

 ------------------------------æµ‹è¯•yolo11_2cbam  1.7 230-----------------------------------------------2026/1/23
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\clear_2cbam\weights\best.pt
ç»“æœï¼š         0.802       0.73

 ------------------------------æµ‹è¯•yolo11_2cbam  1.2 230-----------------------------------------------2026/1/23
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\clear_2cbam\weights\best.pt
ç»“æœï¼š         0.825      0.754

 ------------------------------æµ‹è¯•yolo11_2cbam  0.5 230-----------------------------------------------2026/1/23
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\clear_2cbam\weights\best.pt
ç»“æœ:         0.851      0.776

====================================ç»“è®º  é€‰æ‹©2cbamæœ€ä¸ºæœ€ä½³æ’å…¥æ–¹å¼=======================================2026/1/23
ç”±äº CBAM å¯æ’å…¥ä½ç½®ç»„åˆç©ºé—´è¾ƒå¤§ï¼Œæœ¬æ–‡éµå¾ªé€æ­¥æ‰©å±•ã€æ€§èƒ½ä¼˜å…ˆçš„åŸåˆ™ï¼Œ
é¦–å…ˆè¯„ä¼°å•ç‚¹æ’å…¥ï¼ˆP3ï¼‰ï¼Œå†è¯„ä¼°ä¸¤ç‚¹ï¼ˆP3+P4ï¼‰ä¸ä¸‰ç‚¹ï¼ˆP3+P4+P5ï¼‰æ‰©å±•ã€‚
è¡¨ Ã— æ˜¾ç¤ºï¼Œéšç€ CBAM æ•°é‡å¢åŠ ï¼ŒmAP å…ˆå‡åé™ï¼š2-CBAM åœ¨æ¸…æ™°å›¾ä¸ä¸‰ç§é›¾æµ“åº¦ä¸‹å‡å–å¾—æœ€é«˜ mAP@50ï¼Œ
è€Œ 3-CBAM å› é¢å¤–å‚æ•°å¸¦æ¥çš„è¿‡æ‹Ÿåˆé£é™©ï¼Œé›¾å¤©æ€§èƒ½åè€Œç•¥é™ã€‚
å› æ­¤åç»­å®éªŒå‡ä»¥ 2-CBAM ç»“æ„ä¸ºå‡†ã€‚

====================================å¯»æ‰¾æœ€ä¼˜CBAMå†…éƒ¨ç»“æ„============================================2026/1/23

-----------------------------------è®­ç»ƒ 2cbam_NoMaxPool--------------------------------------------2026/1/23
å°†my_cbam.pyåˆ‡æ¢ä¸ºavg-onlyçš„cbam
yolo train data=data/cottonweed.yaml model=models/yolo11n_2cbam.yaml epochs=50 name=2cbam_NoMaxPool device=0  | tee log_NoMaxPool.txt
 ç»“æœï¼š            0.847      0.776
 ------------------------------æµ‹è¯•2cbam_NoMaxPool  1.7 230-----------------------------------------------2026/1/23
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_NoMaxPool\weights\best.pt
ç»“æœï¼š     0.804      0.738

 ------------------------------æµ‹è¯•2cbam_NoMaxPool  1.2 230-----------------------------------------------2026/1/23
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_NoMaxPool\weights\best.pt
ç»“æœï¼š     0.812      0.748

 ------------------------------æµ‹è¯•2cbam_NoMaxPool  0.5 230-----------------------------------------------2026/1/23
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_NoMaxPool\weights\best.pt
ç»“æœ:     0.829      0.762

-----------------------------------è®­ç»ƒ 2cbam_NoSA--------------------------------------------2026/1/23
å°†my_cbam.pyåˆ‡æ¢ä¸ºNO_SAçš„cbam
yolo train data=data/cottonweed.yaml model=models/yolo11n_2cbam.yaml epochs=50 name=2cbam_NoSA device=0  | tee log_NoCA.txt
 ç»“æœï¼š0.865      0.779
 ------------------------------æµ‹è¯•2cbam_NoSA  1.7 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_NoSA\weights\best.pt
ç»“æœï¼š 0.797      0.727

 ------------------------------æµ‹è¯•2cbam_NoSA  1.2 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_NoSA\weights\best.pt
ç»“æœï¼š 0.819      0.748


 ------------------------------æµ‹è¯•2cbam_NoSA  0.5 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_NoSA\weights\best.pt
ç»“æœ: 0.85      0.772



-----------------------------------è®­ç»ƒ 2cbam_NoCA--------------------------------------------2026/1/24
å°†my_cbam.pyåˆ‡æ¢ä¸ºNO_CAçš„cbam
yolo train data=data/cottonweed.yaml model=models/yolo11n_2cbam.yaml epochs=50 name=2cbam_NoCA device=0  | tee log_NoSA.txt
 ç»“æœï¼š0.854      0.774

 ------------------------------æµ‹è¯•2cbam_NoCA  1.7 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_NoCA\weights\best.pt
ç»“æœï¼š0.808      0.735

 ------------------------------æµ‹è¯•2cbam_NoCA  1.2 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_NoCA\weights\best.pt
ç»“æœï¼š 0.823      0.749


 ------------------------------æµ‹è¯•2cbam_NoCA  0.5 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_NoCA\weights\best.pt
ç»“æœ:0.841      0.766






-----------------------------------è®­ç»ƒ 2cbam_NoAvg--------------------------------------------2026/1/24
å°†my_cbam.pyåˆ‡æ¢ä¸ºNO_AVGçš„cbam
yolo train data=data/cottonweed.yaml model=models/yolo11n_2cbam.yaml epochs=50 name=2cbam_NoAvg device=0  | tee log_2cbam_NoAvg.txt
  260 layers, 2,587,248 parameters, 0 gradients, 6.3 GFLOPs
 ç»“æœï¼š

 ------------------------------æµ‹è¯•2cbam_NoAvg  1.7 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_NoAvg\weights\best.pt
ç»“æœï¼š0.817      0.741

 ------------------------------æµ‹è¯•2cbam_NoAvg  1.2 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_NoAvg\weights\best.pt
ç»“æœï¼š0.836      0.759

 ------------------------------æµ‹è¯•2cbam_NoAvg  0.5 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_NoAvg\weights\best.pt
ç»“æœ:0.855      0.773





-----------------------------------è®­ç»ƒ 2cbam_Dilated--------------------------------------------2026/1/24
å°†my_cbam.pyåˆ‡æ¢ä¸º2cbam_Dilated
yolo train data=data/cottonweed.yaml model=models/yolo11n_2cbam.yaml epochs=50 name=2cbam_Dilated device=0  | tee log_2cbam_Dilated.txt
YOLO11n_2cbam summary (fused): 270 layers, 2,587,166 parameters, 0 gradients, 6.3 GFLOPs
 ç»“æœï¼š 0.868       0.78

 ------------------------------æµ‹è¯•2cbam_Dilated  1.7 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_Dilated\weights\best.pt
ç»“æœï¼š0.819      0.743
Speed: 0.4ms preprocess, 5.7ms inference, 0.0ms loss, 2.2ms postprocess per image

 ------------------------------æµ‹è¯•2cbam_Dilated  1.2 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_Dilated\weights\best.pt
ç»“æœï¼š 0.831      0.755
Speed: 0.4ms preprocess, 6.1ms inference, 0.0ms loss, 2.3ms postprocess per image

 ------------------------------æµ‹è¯•2cbam_Dilated  0.5 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_Dilated\weights\best.pt
ç»“æœ:0.848      0.772
Speed: 0.5ms preprocess, 6.3ms inference, 0.0ms loss, 2.6ms postprocess per image


---------------------------------------------æ–°å¢å»é›¾æ¨¡å—--------------------------------------------------
æ–°å»ºmodels/fog_gate.pyæ–‡ä»¶
ä¿®æ”¹models/__init__.py, æä¾›å‘å¤–æ¥å£
ä¿®æ”¹task.pyï¼Œ æ–°å¢sys.modules['__main__'].FogGate = FogGate
æ–°å»º yolo11_2cbam_FogGate.yaml


-----------------------------------è®­ç»ƒ 2cbam_FogGate--------------------------------------------2026/1/24
å°†my_cbam.pyåˆ‡æ¢ä¸º2cbam_Dilated
yolo train data=data/cottonweed.yaml model=models/yolo11_2cbam_FogGate.yaml epochs=50 name=2cbam_FogGate device=0  | tee log_2cbam_FogGate.txt
 ç»“æœï¼š 0.851      0.771
YOLO11_2cbam_FogGate summary (fused): 276 layers, 2,596,406 parameters, 0 gradients, 6.3 GFLOPs

 ------------------------------æµ‹è¯•2cbam_FogGate  1.7 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_FogGate\weights\best.pt
ç»“æœï¼š0.801      0.732
Speed: 0.4ms preprocess, 6.2ms inference, 0.0ms loss, 2.3ms postprocess per image

 ------------------------------æµ‹è¯•2cbam_FogGate  1.2 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_FogGate\weights\best.pt
ç»“æœï¼š0.817      0.748
Speed: 0.4ms preprocess, 6.3ms inference, 0.0ms loss, 2.4ms postprocess per image



 ------------------------------æµ‹è¯•2cbam_FogGate  0.5 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_FogGate\weights\best.pt
ç»“æœ: 0.836      0.763
Speed: 0.5ms preprocess, 6.6ms inference, 0.0ms loss, 2.3ms postprocess per image




-----------------------------------è®­ç»ƒ 2cbam_FFA--------------------------------------------2026/1/24
å°†my_cbam.pyåˆ‡æ¢ä¸º2cbam_Dilated, fog_gate.py åˆ‡ä¸ºFFA
yolo train data=data/cottonweed.yaml model=models/yolo11_2cbam_FogGate.yaml epochs=50 name=2cbam_FFA device=0  | tee log_2cbam_FFA.txt
 ç»“æœï¼š 0.847      0.764

276 layers, 2,589,494 parameters, 0 gradients, 6.3 GFLOPs

 ------------------------------æµ‹è¯•2cbam_FFA  1.7 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_FFA\weights\best.pt
ç»“æœï¼š 0.799      0.725
Speed: 0.4ms preprocess, 6.5ms inference, 0.0ms loss, 2.2ms postprocess per image


 ------------------------------æµ‹è¯•2cbam_FFA  1.2 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_FFA\weights\best.pt
ç»“æœï¼š0.817      0.741
Speed: 0.4ms preprocess, 5.8ms inference, 0.0ms loss, 2.3ms postprocess per image

 ------------------------------æµ‹è¯•2cbam_FFA  0.5 230-----------------------------------------------2026/1/24
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_FFA\weights\best.pt
ç»“æœ: 0.839      0.763
Speed: 0.4ms preprocess, 5.9ms inference, 0.0ms loss, 2.1ms postprocess per image



-----------------------------------è®­ç»ƒ 2cbam_autoFogGate--------------------------------------------2026/1/25
å°†my_cbam.pyåˆ‡æ¢ä¸º2cbam_Dilated, fog_gate.py auto---
yolo train data=data/cottonweed.yaml model=models/yolo11_2cbam_FogGate.yaml epochs=50 name=2cbam_autoFogGate device=0  | tee log_2cbam_autoFogGate.txt
 ç»“æœï¼š 0.86      0.789
YOLO11_2cbam_FogGate summary (fused): 276 layers, 2,596,407 parameters, 0 gradients, 6.3 GFLOPs


 ------------------------------æµ‹è¯•2cbam_autoFogGate  1.7 230-----------------------------------------------2026/1/25
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_autoFogGate\weights\best.pt
ç»“æœï¼š 0.81      0.743
Speed: 0.4ms preprocess, 6.4ms inference, 0.0ms loss, 2.7ms postprocess per image


 ------------------------------æµ‹è¯•2cbam_autoFogGate  1.2 230-----------------------------------------------2026/1/25
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_autoFogGate\weights\best.pt
ç»“æœï¼š0.828      0.761
Speed: 0.4ms preprocess, 6.1ms inference, 0.0ms loss, 2.0ms postprocess per image


 ------------------------------æµ‹è¯•2cbam_autoFogGate  0.5 230-----------------------------------------------2026/1/25
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_autoFogGate\weights\best.pt
ç»“æœ:0.847      0.778
Speed: 0.4ms preprocess, 6.2ms inference, 0.0ms loss, 2.1ms postprocess per image



==========================================è¡¥åšå®éªŒï¼š2cbam_NoAvg_Dilated=================================
-----------------------------------è®­ç»ƒ 2cbam_NoAvg_Dilated--------------------------------------------2026/1/26
å°†my_cbam.pyåˆ‡æ¢ä¸º2cbam_NoAvg_Dilated
yolo train data=data/cottonweed.yaml model=models/yolo11_2cbam.yaml epochs=50 name=2cbam_NoAvg_Dilated device=0  | tee log_2cbam_NoAvg_Dilated.txt
 ç»“æœï¼š 0.847       0.77
YOLO11_2cbam summary (fused): 268 layers, 2,587,166 parameters, 0 gradients, 6.3 GFLOPs

 ------------------------------æµ‹è¯•2cbam_NoAvg_Dilated  1.7 230-----------------------------------------------2026/1/26
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\2cbam_NoAvg_Dilated\weights\best.pt
ç»“æœï¼š0.797      0.728
Speed: 0.5ms preprocess, 6.8ms inference, 0.0ms loss, 2.7ms postprocess per image

 ------------------------------æµ‹è¯•2cbam_NoAvg_Dilated  1.2 230-----------------------------------------------2026/1/26
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\2cbam_NoAvg_Dilated\weights\best.pt
ç»“æœï¼š 0.817      0.748
Speed: 0.5ms preprocess, 6.7ms inference, 0.0ms loss, 2.4ms postprocess per image

 ------------------------------æµ‹è¯•2cbam_NoAvg_Dilated  0.5 230-----------------------------------------------2026/1/26
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\2cbam_NoAvg_Dilated\weights\best.pt
ç»“æœ: 0.841      0.768
Speed: 0.5ms preprocess, 6.3ms inference, 0.0ms loss, 2.5ms postprocess per image



--------------------------------çŸ¥è¯†è’¸é¦---------------------------------------
å‡çº§ultralyticså‰ï¼šUltralytics 8.3.11 ğŸš€ Python-3.10.19 torch-2.7.1+cu118
ç”±äºçŸ¥è¯†è’¸é¦éœ€è¦8.4+çš„ultralyticsï¼Œç°åœ¨è¦å¯¹ultrallyticè¿›è¡Œå‡çº§
pip freeze > yolo11_fog_requirements.txt   å¯¼å‡ºæ‰€æœ‰ä¾èµ–è¿›è¡Œå¤‡ä»½
pip install -U ultralytics  å‡çº§ultralytics

ä¸¤æ¡è·¯ï¼šå°†yolo11scaleè°ƒå°ï¼Œä½œä¸ºstudent model
       æ”¾å¼ƒçŸ¥è¯†è’¸é¦ï¼Œä½¿ç”¨int8é‡åŒ–

é€‰æ‹©ç¬¬ä¸€æ¡ï¼Œ å°†yolo11nçš„scaleçš„widthè°ƒä¸º1.5ï¼Œ æ–‡ä»¶åä¸ºminiYolo11n.yaml
æ‰§è¡Œtrain_kd.py
ç»“æœï¼š0.232      0.148
miniYolo11n summary (fused): 101 layers, 1,151,191 parameters, 0 gradients, 3.2 GFLOPs
mAPå¤ªä½ï¼Œtry epochs 50ï¼š
---------------------------------- set epochs = 50 -----------------------------------2026/1/28
run train_kd.py
 0.582      0.486
miniYolo11n summary (fused): 101 layers, 1,151,191 parameters, 0 gradients, 3.2 GFLOPs

 ------------------------------æµ‹è¯•KD_miniYolo11n_50epochs  1.7 230-----------------------------------------------2026/1/28
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\KD_miniYolo11n_50epochs\weights\best.pt
ç»“æœï¼š 0.508      0.428
Speed: 2.4ms preprocess, 7.1ms inference, 0.0ms loss, 2.3ms postprocess per image

 ------------------------------æµ‹è¯•KD_miniYolo11n_50epochs  1.2 230-----------------------------------------------2026/1/28
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\KD_miniYolo11n_50epochs\weights\best.pt
ç»“æœï¼š0.535      0.452
Speed: 2.5ms preprocess, 6.9ms inference, 0.0ms loss, 2.5ms postprocess per image

 ------------------------------æµ‹è¯•KD_miniYolo11n_50epochs  0.5 230-----------------------------------------------2026/1/28
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\KD_miniYolo11n_50epochs\weights\best.pt
ç»“æœ:0.565      0.474
Speed: 2.3ms preprocess, 7.1ms inference, 0.0ms loss, 2.4ms postprocess per image



--------------------------------------------# 1. å¯¼å‡º ONNX----------------------------------------------------
yolo export model=runs/detect/2cbam_autoFogGate/weights/best.pt format=onnx opset=12

------------------------------------# 2. TensorRT INT8ï¼ˆç”¨ä½ å·²æœ‰é›¾å›¾åšæ ¡å‡†ï¼‰-----------------------------
yolo export model=runs/detect/2cbam_autoFogGate/weights/best.pt format=engine int8=True data=data/cottonweed.yaml calib_data=data/cottonweed.yaml
yolo export model=runs/detect/2cbam_autoFogGate/weights/best.pt format=engine int8=True data=data/cottonweed.yaml
pip install pycuda==2024.1 -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install nvidia-tensorrt==8.6.1.6 --index-url https://pypi.nvidia.com -i https://pypi.tuna.tsinghua.edu.cn/simple
ä»¥ä¸Šéƒ½è¯•äº†ï¼Œæ²¡ç”¨ï¼Œè¿˜æ˜¯ä¸é‡åŒ–äº†ï¼Œå¥½å¥½åšè’¸é¦å§



---------------------------------- set epochs = 100 -----------------------------------2026/1/28
alpha = 0.5,    miniYolo11n.yamlçš„width = 0.15
run train_kd.py
 0.754      0.661
 miniYolo11n summary (fused): 101 layers, 1,151,191 parameters, 0 gradients, 3.2 GFLOPs

 ------------------------------æµ‹è¯•KD_miniYolo11n_100epochs  1.7 230-----------------------------------------------2026/1/28
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\KD_miniYolo11n_100epochs\weights\best.pt
ç»“æœï¼š0.706      0.621
Speed: 2.8ms preprocess, 6.9ms inference, 0.0ms loss, 2.5ms postprocess per image


 ------------------------------æµ‹è¯•KD_miniYolo11n_100epochs  1.2 230-----------------------------------------------2026/1/28
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\KD_miniYolo11n_100epochs\weights\best.pt
ç»“æœï¼š 0.72      0.634
Speed: 2.5ms preprocess, 7.0ms inference, 0.0ms loss, 2.4ms postprocess per image

 ------------------------------æµ‹è¯•KD_miniYolo11n_100epochs  0.5 230-----------------------------------------------2026/1/28
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\KD_miniYolo11n_100epochs\weights\best.pt
ç»“æœ:0.737      0.648
Speed: 2.5ms preprocess, 7.5ms inference, 0.0ms loss, 2.4ms postprocess per image




---------------------------------- è®­ç»ƒKD_miniYolo11n_100epochs_0.3alpha -----------------------------------2026/1/31
å°†alphaä»0.5è°ƒåˆ°0.3
python train_kd_100epochs_0.3alpha.py | tee log_KD_miniYolo11n_100epochs_0.3alpha.txt

 ------------------------------æµ‹è¯•KD_miniYolo11n_100epochs_0.3alpha  1.7 230-----------------------------------------------2026/1/31
 yolo val data=data/fog_val_nodeep_1.7_230.yaml model=runs\detect\KD_miniYolo11n_100epochs_0.3alpha\weights\best.pt
ç»“æœï¼š


 ------------------------------æµ‹è¯•KD_miniYolo11n_100epochs_0.3alpha  1.2 230-----------------------------------------------2026/1/31
 yolo val data=data/fog_val_nodeep_1.2_230.yaml model=runs\detect\KD_miniYolo11n_100epochs_0.3alpha\weights\best.pt
ç»“æœï¼š

 ------------------------------æµ‹è¯•KD_miniYolo11n_100epochs_0.3alpha  0.5 230-----------------------------------------------2026/1/31
 yolo val data=data/fog_val_nodeep_0.5_230.yaml model=runs\detect\KD_miniYolo11n_100epochs_0.3alpha\weights\best.pt
ç»“æœ:









Installing collected packages: numpy
  Attempting uninstall: numpy
    Found existing installation: numpy 1.26.4
    Uninstalling numpy-1.26.4:
      Successfully uninstalled numpy-1.26.4
Successfully installed numpy-2.2.6


è’¸é¦ä¼˜åŒ–ç­–ç•¥ï¼š
ç‰¹å¾è’¸é¦æŸå¤±çš„æƒé‡éœ€é«˜äºåˆ†ç±»æŸå¤±
ç®€åŒ–æ¨¡å‹ç»“æ„-ã€‹æé«˜æ¨ç†é€Ÿåº¦